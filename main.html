<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>tigger control</title>
	</head>
	<style type="text/css">
		input {
			position: absolute;
			top: 30px;
			z-index: 9999999999;
		}
		#btn-2d {
			left: 20px;
		}
		#btn-3d {
			left: 80px;
		}
	</style>
	<script src="https://ajax.aspnetcdn.com/ajax/jquery/jquery-3.4.1.min.js"></script>
	<script charset="utf-8" src="https://map.qq.com/api/gljs?v=1.exp&key=SH3BZ-ZIS6U-VOSVA-2NNRU-QUQ7V-QLFK2&libraries=visualization"></script>
	<script src="js/init.js"></script>
	<body>
		<div id="map">
		<input type="button" id="btn-2d" onclick="change2D()" value="切换2D">
		<input type="button" id="btn-3d" onclick="change3D()" value="切换3D">	
		</div>
		
		<script type="text/javascript">
			
			var lat = 40.014393
			var lng = 119.853354
			
			var heatData = [{
				"lng": 119.853354,
				"lat": 40.014393,
				"count": 25
			}, {
				"lng": 119.8535645927169,
				"lat": 40.01561688366503,
				"count": 100
			},
			{
				"lng": 119.85253559866885,
				"lat": 40.015114341364374,
				"count": 80
			},	
			];
			var areaData = [
				[[
				119.8535645927169,40.01561688366503,
				119.85253559866885,40.015114341364374,
				119.85180486385343,40.01454897679959,
				119.85151406104046,40.01409782406899,
				119.85368389645544,40.01321264197515,
				119.8553392344196,40.01454326611134,
				119.85357950572688,40.01561688366503,
				119.85354967970693,40.015611173022556, 
				]]
			]
			var areaDatas = [];
			areaData.forEach((item) => {
			var newPath = [];
			var items = item[0];
			for(var i=0;i<items.length;i++){
			  if((i%2)!=0){
				newPath[i]=items[i-1];
			  }else{
				newPath[i]=items[i+1];
			  }
			}
			areaDatas.push(newPath);
			})
			
			var id = document.getElementById('map')
			//加载地图
			window.onunload = initMap(id,lat,lng,areaDatas,heatData,function(e){
				alert(e.latLng.lat+'-----'+e.latLng.lng)
				//alert("点击事件")
			},
			function(){
				//鼠标悬停事件
				//alert("悬停")
			})
			
			//获取数据
			function getData(){
				$.ajax({
					type: 'post',
					url: 'xxxx',
					data: JSON.stringify(xxx),
					dataType:'json',
					contentType:'application/json',
					success: function (data,xhr,response) {
						//heatData = data
						//areaData = data
						console.log(data)
					},
					error: function (jqXHR, textStatus, errorThrown) {
						console.log(jqXHR.responseText)
					}
				});
			}
			
		</script>
	</body>
</html>
